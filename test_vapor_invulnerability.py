#!/usr/bin/env python3
"""
Test script to verify Heinous Vapor invulnerability.
"""

from boneglaive.utils.constants import UnitType
from boneglaive.game.units import Unit

def test_vapor_invulnerability():
    # Create a Heinous Vapor unit
    vapor = Unit(UnitType.HEINOUS_VAPOR, player=1, y=0, x=0)
    
    # Set invulnerability flag
    vapor.is_invulnerable = True
    
    # Initialize HP
    initial_hp = vapor.hp
    print(f"Initial HP: {initial_hp}")
    
    # Try to damage the vapor
    vapor.hp = 1  # Try to reduce to 1
    print(f"HP after damage attempt: {vapor.hp}")
    
    # Try to increase the vapor's HP (should work)
    vapor.hp = initial_hp + 5
    print(f"HP after healing: {vapor.hp}")
    
    # Try to damage again
    vapor.hp = 1
    print(f"HP after second damage attempt: {vapor.hp}")
    
    # Use take_damage method
    actual_damage = vapor.take_damage(10)
    print(f"Actual damage dealt: {actual_damage}")
    print(f"HP after take_damage: {vapor.hp}")
    
    print("Test passed!" if vapor.hp == initial_hp + 5 else "Test failed!")

if __name__ == "__main__":
    test_vapor_invulnerability()